# 第5章 局部引用和全局引用

JNI提供了一些实例和数组类型（如jobject，jclass，jstring和jarray）作为不透明的引用。本地代码不能直接访问不透明引用指针的内容。需要通过JNI函数去访问指向不透明引用的数据结构。如果仅仅处理透明引用，你不必担心基于java虚拟机的内部对象实现。你只需要知道JNI中不同类型的引用：

* JNI支持三种透明引用：局部引用，全局引用和弱全局引用。
* 局部引用和全局引用有不同的生命周期。局部引用会被自动释放，然而全局引用和弱全局引用必须程序员手动释放。
* 一个局部引用或者全局引用会阻止GC回收它们的引用对象，而弱全局引用会被GC回收。
* 不是所有的引用可以在任何环境使用。例如，一个本地方法创建一个局部引用并返回后，再对这个局部引用进行访问是非法的。

本章，我们将详细讨论这些问题。合理地管理JNI引用是写出高质量代码的关键。

